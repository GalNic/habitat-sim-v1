<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Habitat Layout Creator – V1.2.0</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">Your Home in Space — Demo V1.2.0</div>
    <div class="controls">
      <label>Entorno:
        <select id="envSelect">
          <option value="moon_south_pole">Luna Sur</option>
          <option value="mars">Marte</option>
          <option value="exoplanet">Exoplaneta</option>
        </select>
      </label>
      <label>Tripulación (N):
        <input id="crewInput" type="number" min="1" step="1" value="2" />
      </label>
      <button id="undoBtn">Deshacer</button>
      <button id="redoBtn">Rehacer</button>
      <button id="reloadBtn">Recargar parámetros</button>
      <button id="simulateBtn">Simular Vida</button>
      <button id="exportJsonBtn">Exportar JSON</button>
      <button id="exportPngBtn">Exportar PNG</button>
    </div>
  </header>

  <main class="layout">
    <aside class="sidebar">
      <h3>Módulos</h3>
      <div id="palette" class="palette"></div>
      <hr/>
      <h3>Cascarón</h3>
      <div class="shell-controls">
        <button class="shellBtn" data-shape="ellipse">Elipse</button>
        <button class="shellBtn" data-shape="cylinder">Cilindro</button>
        <button class="shellBtn" data-shape="cube">Cubo</button>
        <button class="shellBtn" data-shape="pyramid">Pirámide</button>
        <div class="shell-inputs">
          <label>A (m): <input id="shellA" type="number" step="0.1"></label>
          <label>B (m): <input id="shellB" type="number" step="0.1"></label>
          <label>H (m): <input id="shellH" type="number" step="0.1"></label>
          <button id="applyShell">Aplicar</button>
        </div>
      </div>
    </aside>

    <section class="canvas-panel">
      <div class="tabs">
        <button class="tab active" data-view="top">Vista Superior</button>
        <button class="tab" data-view="front">Vista Frontal</button>
        <button class="tab" data-view="side">Vista Lateral</button>
      </div>
      <canvas id="canvas" width="1100" height="700"></canvas>
      <div class="hint">Escala aprox: 1 m = 30 px. Cascarón, pasillos y límites vienen del CSV/controles.</div>
    </section>

    <aside class="right-panel">
      <div class="sim-parallel">
        <div class="sim-head">Sim paralelo</div>
        <div class="sim-body">
          <button id="snapA">Guardar Slot A</button>
          <button id="runA">Sim Slot A</button>
          <span id="lifeA">-</span>
          <br/>
          <button id="snapB">Guardar Slot B</button>
          <button id="runB">Sim Slot B</button>
          <span id="lifeB">-</span>
        </div>
      </div>

      <div class="props">
        <h3>Propiedades</h3>
        <div id="propNone">Seleccioná un módulo…</div>
        <div id="propCard" class="propCard" hidden>
          <div><b id="pName"></b></div>
          <div>NHV mín (m³): <span id="pNHVmin">-</span></div>
          <div>NHV ref (m³): <span id="pNHVref">-</span></div>
          <div>Masa (kg): <span id="pMass">-</span></div>
          <div>Dimensiones (m): <span id="pDims">-</span></div>
          <div>Volumen 3D (m³): <span id="pVol">-</span></div>
        </div>
      </div>

      <div class="score">
        <h3>Score & Estado</h3>
        <div id="metrics" class="metrics">
          <div>Colisiones: <span id="mCollisions">-</span></div>
          <div>Adyacencias: <span id="mAdj">-</span></div>
          <div>NHV eficiencia: <span id="mNHV">-</span></div>
          <div>Masa total (kg): <span id="mMass">-</span></div>
          <hr/>
          <div>Vida estimada (días): <span id="mLife">-</span></div>
          <div>Motivo de fallo: <span id="mFail">-</span></div>
          <div>Score base (0-1): <span id="mBase">-</span></div>
          <div>Opt volumen (0-1): <span id="mOptV">-</span></div>
          <div>Opt masa (0-1): <span id="mOptM">-</span></div>
          <div><b>Score final (0-100): <span id="mFinal">-</span></b></div>
        </div>
      </div>
    </aside>
  </main>

  <footer class="footer">
    V1.2.0 • EVA = Actividad Extravehicular • NHV = Net Habitable Volume • Parámetros 100% desde CSV
  </footer>

  <script src="app.js"></script>
</body>
</html>
